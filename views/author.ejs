<!DOCTYPE html>
<html lang="en">

<%- include('blocks/head.html') %>

<body>

    <%- include('blocks/header.html') %>

        <main>

            <div class="container">
                
                <h1 class="subtitle"><%= author.name %> <%= author.surname %></h1>

                <% if (author.books.length != 0) { %>
                    <p>
                        Seeing <b><%= author.name %><% if (author.surname) { %> <%=author.surname%><% } %></b>'s books!
                    </p>

                    <table class="table">
                        <thead class="table-header">
                            <tr>
                                <% for (let key in author.books[0]) {%>
                                    <% if (key != 'author_id') { %>
                                        <th class="table-header-field">
                                            <%= key %>
                                        </th>
                                    <% } %>
                                <% } %>
                                <th class="table-header-field">
                                    link
                                </th>
                            </tr>
                        </thead>
                        <tbody class="table-body">
                            <% for (let book of author.books) {%>
                                <tr>
                                    <% for (let key in book) {%>
                                        <% if (key != 'author_id') { %>
                                            <td class="table-body-field">
                                                <%= book[key] %>
                                            </td>
                                        <% } %>
                                    <% } %>
                                    <td class="table-body-field">
                                        <a class="link" href="/books/<%= book.id %>">See book</a>
                                    </td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>

                <% } else { %>
                    <p>
                       <b><%= author.name %> <% if (author.surname) { %><%= author.surname %><% } %></b> has no books in our library yeet!
                    </p>
                <% }  %>

                <div class="margin-top">
                    <a class="button-link" href="<%= author.id %>/delete">Delete author</a>
                </div>

            </div>

        </main>

</body>

<%- include('blocks/scripts.html')%>

</html>